function get_i18n(pagename)
{
	i18n={
		"en":
		{
			"index":
			{
				"Join | LlixHoot":"Join | LlixHoot",
				"Join a Game": "Join a Game ",
				"Display Name": "Display Name",
				"Game Pin": "Game Pin",
				"Join": "Join",
				"Click here to host a kahoot!": "Click here to host a LlixHoot!"
			},
			"quiz":
			{
				"Create | KahootClone": "Create | LlixHoot",
				"Start a Kahoot Game": "Start a Kahoot Game",
				"Back": "Back",
				"Choose a Game Below or ": "Choose a Game Below or",
				"Create your Own!": "Create your Own!"
			},
			"quiz_new":
			{
				"Creator | KahootClone":"Creator | KahootClone",
				"Kahoot Quiz Creator Studio":"Llixhoot Quiz Creator Studio",
				"Quiz Title": "Quiz Title",
				"Question 1: ": "Question 1: ",
				"Answer 1: ":"Answer 1: ",
				"Answer 2: ":"Answer 2: ",
				"Answer 3: ":"Answer 3: ",
				"Answer 4: ":"Answer 4: ",
				"Correct Answer (1-4) :": "Correct Answer (1-4) :",
				"Add another question": "Add another question",
				"Create Quiz": "Create Quiz",
				"Cancel quiz and return to quiz selection": "Cancel quiz and return to quiz selection"
			},
			"host":
			{
				"Host | KahootClone": "Host | LlixHoot",
				"Join this Game using the Game Pin: ": "Join this Game using the Game Pin: ",
				"Cancel Game": "Cancel Game",
				"Start Game": "Start Game"
			},
			"game":
			{
				"Game | KahootClone": "Game | LlixHoot",
				"Question 1 / x": "Question 1 / x",
				"Player's answer: 0 / x":"Player's answer: 0 / x",
				"Time Left:": "Time Left:",
				"Question": "Question",
				"Answer": "Answer",
				"Top 5 Players": "Top 5 Players",
				"Next Question":"Next Question"
			},
			"player":
			{
				"Lobby | KahootClone": "Lobby | LlixHoot",
				"Waiting on host to start game":"Waiting on host to start game",
				"Do you see your name on the screen?":"Do you see your name on the screen?"
			},
			"new_game":
			{
				"Game | KahootClone": "Game | KahootClone",
				"Name: ":"Name: ",
				"Score: ":"Score: "
			},
			"node":
			{
				"Name: ": "Name: ",
				"Score: ": "Score: ",
				"Correct!": "Correct!",
				"Incorrect!": "Incorrect!",
				"GAME OVER": "FIN de la PARTIDA",
				"Players Answered 0 / ":"Players Answered: 0 / ",
				"Players Answered ":"Players Answered ",
				"Answer Submitted! Waiting on other players...": "Answer Submitted! Waiting on other players...",
				"Question: ": "Question: ",
				"Question 1: ": "Question 1: ",
				"Answer 1: ":"Answer 1: ",
				"Answer 2: ":"Answer 2: ",
				"Answer 3: ":"Answer 3: ",
				"Answer 4: ":"Answer 4: ",
				"Correct Answer (1-4) :": "Correct Answer (1-4) :",
				"Are you sure you want to exit? All work will be DELETED!":"Are you sure you want to exit? All work will be DELETED!"
			}

		},
		"es":
		{
			"index":
			{
				"Join | KahootClone":"Únete | LlixHoot",
				"Join a Game": "Unirse a una partida",
				"Display Name": "Nombre a mostrar",
				"Game Pin": "Pin del juego",
				"Join": "Unirse",
				"Click here to host a Kahoot!": "¡Pulsa aquí para crear un LlixHoot!"
			},
			"quiz":
			{
				"Create | KahootClone": "Crear | LlixHoot",
				"Start a Kahoot Game": "Iniciar un LlixHoot",
				"Back": "Volver",
				"Choose a Game Below or ": "Elige un juego o ",
				"Create your Own!": "¡Crea uno propio!"
			},
			"quiz_new":
			{
				"Creator | KahootClone":"Diseñador | LlixHoot",
				"Kahoot Quiz Creator Studio":"Diseñador de Llixhoots",
				"Quiz Title": "Título",
				"Question 1: ": "Pregunta 1: ",
				"Answer 1: ":"Respuesta 1: ",
				"Answer 2: ":"Respuesta 2: ",
				"Answer 3: ":"Respuesta 3: ",
				"Answer 4: ":"Respuesta 4: ",
				"Correct Answer (1-4) :": "Respuesta correcta (1-4) :",
				"Add another question": "Añadir otra pregunta",
				"Create Quiz": "Crear cuestionario",
				"Cancel quiz and return to quiz selection": "Cancelar y volver"
			},
			"host":
			{
				"Host | KahootClone": "Host | LlixHoot",
				"Join this Game using the Game Pin: ": "Introduce el pin para unirte: ",
				"Cancel Game": "Cancelar",
				"Start Game": "Jugar"
			},
			"game":
			{
				"Game | Kahoot": "Juego | LlixHoot",
				"Question 1 / x": "Pregunta 1 / x",
				"Players Answered: 0 / x":"Preguntas respondidas: 0 / x",
				"Time Left:": "Tiempo restante:",
				"Question": "Pregunta",
				"Answer": "Respuesta",
				"Top 5 Players": "Mejores jugadores",
				"Next Question":"Siguiente pregunta"
			},
			"player":
			{
				"Lobby | KahootClone": "Lobby | LlixHoot",
				"Waiting on host to start game":"Esperando al servidor para empezar...",
				"Do you see your name on the screen?":"¿Ves tu nombre en la pantalla?"
			},
			"new_game":
			{
				"Game | KahootClone": "Partida | LlixHoot",
				"Name: ":"Nombre: ",
				"Score: ":"Puntos: "
			},
			"node":
			{
				"Name: ": "Nombre: ",
				"Score: ": "Puntos: ",
				"Correct!": "¡Correcto!",
				"Incorrect!": "¡Incorrecto!",
				"GAME OVER": "FIN de la PARTIDA",
				"Players Answered 0 / ":"Respondidas: 0 / ",
				"Players Answered ":"Respondidas: ",
				"Answer Submitted! Waiting on other players...": "Respuesta enviada. Esperando al resto de jugadores...",
				"Question ": "Pregunta ",
				"Question 1: ": "Pregunta 1: ",
				"Answer 1: ":"Respuesta 1: ",
				" Answer 2: ":"Respuesta 2: ",
				"Answer 3: ":"Respuesta 3: ",
				" Answer 4: ":"Respuesta 4: ",
				"Correct Answer (1-4): ": "Respuesta correcta (1-4) : ",
				"Are you sure you want to exit? All work will be DELETED!":"¿Salir? Todo el trabajo se perderá"
			}


		},
		"ca":
		{
			"index":
			{
				"Join | LlixHoot":"Join | LlixHoot",
				"Join a Game": "Join a Game",
				"Display Name": "Display Name",
				"Game Pin": "Game Pin",
				"Join": "Join",
				"Click here to host a Kahoot!": "Click here to host a LlixHoot!"
			},
			"quiz":
			{
				"Create | KaootClone": "Create | LlixHoot",
				"Start a Kahoot Game": "Start a Kahoot Game",
				"Back": "Back",
				"Choose a Game Below or ": "Choose a Game Below or ",
				"Create your Own!": "Create your Own!"
			},
			"quiz_new":
			{
				"Creator | KahootClone":"Creator | KahootClone",
				"Llixhoot Quiz Creator Studio":"Llixhoot Quiz Creator Studio",
				"Quiz Title": "Quiz Title",
				"Question 1: ": "Question 1: ",
				"Answer 1: ":"Answer 1: ",
				"Answer 2: ":"Answer 2: ",
				"Answer 3: ":"Answer 3: ",
				"Answer 4: ":"Answer 4: ",
				"Correct Answer (1-4) :": "Correct Answer (1-4) :",
				"Add another question": "Add another question",
				"Create Quiz": "Create Quiz",
				"Cancel quiz and return to quiz selection": "Cancel quiz and return to quiz selection"
			},
			"host":
			{
				"Host | LlixHoot": "Host | LlixHoot",
				"Join this Game using the Game Pin: ": "Join this Game using the Game Pin: ",
				"Cancel Game": "Cancel Game",
				"Start Game": "Start Game"
			},
			"game":
			{
				"Game | LlixHoot": "Game | LlixHoot",
				"Question 1 / x": "Question 1 / x",
				"Players Answered: 0 / x":"Players Answered: 0 / x",
				"Time Left:": "Time Left:",
				"Question": "Question",
				"Answer": "Answer",
				"Next Question":"Next Question",
				"Top 5 Players": "Top 5 Players",
			},
			"player":
			{
				"Lobby | KahootClone": "Lobby | LlixHoot",
				"Waiting on host to start game":"Waiting on host to start game",
				"Do you see your name on the screen?":"Do you see your name on the screen?"
			},
			"new_game":
			{
				"Game | KahootClone": "Game | KahootClone",
				"Name: ":"Name: ",
				"Score: ":"Score: "
			},
			"node":
			{
				"Name: ": "Name: ",
				"Score: ": "Score: ",
				"Correct!": "Correct!",
				"Incorrect!": "Incorrect!",
				"GAME OVER": "FIN de la PARTIDA",
				"Players Answered 0 / ":"Players Answered: 0 / ",
				"Players Answered ":"Respondidas: ",
				"Answer Submitted! Waiting on other players...": "Answer Submitted! Waiting on other players...",
				"Question: ": "Question: ",
				"Question 1: ": "Question 1: ",
				"Answer 1: ":"Answer 1: ",
				"Answer 2: ":"Answer 2: ",
				"Answer 3: ":"Answer 3: ",
				"Answer 4: ":"Answer 4: ",
				"Correct Answer (1-4) :": "Correct Answer (1-4) :",
				"Are you sure you want to exit? All work will be DELETED!":"Are you sure you want to exit? All work will be DELETED!"
			}

		}
	};

	if (navigator.language.startsWith("es"))
	{
		locale=i18n["es"][pagename];
		node_i18n=i18n["es"]['node'];
	} else if (navigator.language.startsWith("ca")) {
		locale=i18n["es"][pagename];
		node_i18n=i18n["es"]['node'];
	} else {
		locale=i18n["en"][pagename];
		node_i18n=i18n["en"]['node'];
	}
	return(locale)
}

function translate(element)
{
	return(node_i8n[element]);
}

function translate_element(element)
{
	var msgid_orig=element.innerHTML;
	var msgid2=msgid_orig.replace(/^.+[<]([^\/])/,"<$1");
	var msgid=msgid_orig.replace(/[<].*/,"");
	console.log("*"+msgid+"*");
	if (msgid in locale)
	{
		if (msgid==msgid2)
		{
			element.innerHTML=locale[msgid];
		} else {
			console.log("+"+msgid2+"*");
			element.innerHTML=locale[msgid]+msgid2;

		}
	}
}

function _(msgid)
{
	if (msgid in node_i18n)
	{
		msgid=node_i18n[msgid];
	} 
	return(msgid)
}

function i18n(page)
{
	locale=get_i18n(page);
	var x=0;
	to_translate=document.getElementsByTagName("TITLE");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("BUTTON");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("H1");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("H2");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("H3");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("H4");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("LABEL");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
	to_translate=document.getElementsByTagName("A");
	for (x = 0; x < to_translate.length; x++) {
  		translate_element(to_translate[x]);
	}			 
}

var locale;
var node_i18n;
